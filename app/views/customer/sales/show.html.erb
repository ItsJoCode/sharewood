<div class="card-bg" data-controller="range-slider"
                    data-range-slider-price-value = "<%= @sale.price_reduction %>"
                    data-range-slider-weight-value = "<%= @sale.product.weight %>" >
  <div class="card-banner" style="background-image: linear-gradient(rgba(0,0,0,0), rgba(0,0,0,0)), url('<%= image_path "pellet.png" %>')"></div>
  <div class="card-wrapper" id="card-wrapper">
    <div class="card-pellet-style">
      <%= render 'products/card_product', product: @sale.product %>
      <br>
      <%= render 'sales/card_sale_footer', sale: @sale %>
    </div>
    <div class="product-wrapper">
      <%= render "products/card_product_description", product: @sale.product %>
    </div>
  </div>

  <div class="counter-wrapper" id="sales-wrapper">

    <div class="countdown" data-controller="countdown" data-countdown-endtime-value="<%= @sale.end_date %>">
      <div id="msg-end-sale"><i class="fa-solid fa-clock"></i> Fin de la vente dans</div>
      <div id="timer">
        <span data-countdown-target="days"></span>
        <span>J:</span>
        <span data-countdown-target="hours"></span>
        <span>h:</span>
        <span data-countdown-target="minutes"></span>
        <span>min:</span>
        <span data-countdown-target="seconds"></span>
      </div>
    </div>

    <div class="select-button">
      <div class="range-slider">
        <%= simple_form_for [:customer, @sale, @order] do |f| %>
          <%= f.input :capacity, as: :range, id: "capacity", label: "Sélectionnez la Quantité:", input_html: { min: (@sale.sale_capacity * 0.1), max: (@sale.sale_capacity - @sale.current_capacity.to_i), value: 2, data: { range_slider_target: 'input', action: 'range-slider#onInput'}}%>
          <%# <%= f.input_field :capacity, class: "field", data: { range_slider_target: 'output' } %>
          <output for="capacity" data-range-slider-target="output"></output >
          <div class="total">
            <p>Prix total: <span data-range-slider-target="price"></span> €</p>
            <p>Poids total: <span data-range-slider-target="weight"></span> Kg</p>
          </div>
          <%= f.button :submit, class: 'btn btn-lg w-100', data: { turbo: false } %>
        <% end %>
      </div>
    </div>

  </div>

</div>
